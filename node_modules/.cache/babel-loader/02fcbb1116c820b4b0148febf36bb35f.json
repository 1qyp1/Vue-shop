{"ast":null,"code":"import { Toast } from \"vant\";\nimport Header from \"@/components/path/Header.vue\";\nimport Tabbar from \"@/components/common/Tabbar.vue\";\nimport http from \"@/common/api/request.js\";\nexport default {\n  data() {\n    return {\n      pathStatus: false,\n      AddressInfo: {},\n      areaList: {\n        province_list: {\n          110000: \"柳州市\",\n          120000: \"北海市\",\n          130000: \"南宁市\"\n        },\n        city_list: {\n          110100: \"柳城县\",\n          110200: \"融水县\",\n          120100: \"合浦县\",\n          130100: \"上林县\"\n        },\n        county_list: {\n          110101: \"东城区\",\n          110102: \"西城区\",\n          110201: \"东城区\",\n          110202: \"西城区\",\n          120101: \"东城区\",\n          120102: \"西城区\",\n          130101: \"东城区\",\n          130102: \"西城区\"\n        }\n      }\n    };\n  },\n\n  components: {\n    Header,\n    Tabbar\n  },\n\n  mounted() {\n    let key = JSON.parse(this.$route.params.key); //是通过添加进来的\n\n    if (key == \"add\") {\n      this.pathStatus = true;\n    } else {\n      //编辑进来的\n      this.AddressInfo = key;\n      this.AddressInfo.isDefault = this.AddressInfo.isDefault == 1 ? true : false;\n    }\n  },\n\n  methods: {\n    //点击保存触发 ==> 增加\n    onAdd(content) {\n      content.isDefault = content.isDefault == true ? 1 : 0;\n      http.$axios({\n        url: \"/api/addAddress\",\n        method: \"post\",\n        headers: {\n          token: true\n        },\n        data: { ...content\n        }\n      }).then(res => {\n        if (!res.success) return;\n        Toast(res.msg);\n        this.$router.push(\"/path\");\n      });\n    },\n\n    //点击保存触发 ==> 修改\n    onUpdate(content) {\n      content.isDefault = content.isDefault == true ? 1 : 0;\n      http.$axios({\n        url: \"/api/updateAddress\",\n        method: \"post\",\n        headers: {\n          token: true\n        },\n        data: { ...content\n        }\n      }).then(res => {\n        if (!res.success) return;\n        Toast(res.msg);\n        this.$router.push(\"/path\");\n      });\n    },\n\n    //删除\n    onDelete(content) {\n      http.$axios({\n        url: \"/api/deleteAddress\",\n        method: \"post\",\n        headers: {\n          token: true\n        },\n        data: {\n          id: content.id\n        }\n      }).then(res => {\n        if (!res.success) return;\n        Toast(res.msg);\n        this.$router.push(\"/path\");\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA8BA;AACA;AACA;AACA;AACA;EACAA;IACA;MACAC,iBADA;MAEAC,eAFA;MAGAC;QACAC;UACA,aADA;UAEA,aAFA;UAGA;QAHA,CADA;QAMAC;UACA,aADA;UAEA,aAFA;UAGA,aAHA;UAIA;QAJA,CANA;QAYAC;UACA,aADA;UAEA,aAFA;UAGA,aAHA;UAIA,aAJA;UAKA,aALA;UAMA,aANA;UAOA,aAPA;UAQA;QARA;MAZA;IAHA;EA2BA,CA7BA;;EA8BAC;IACAC,MADA;IAEAC;EAFA,CA9BA;;EAkCAC;IACA,6CADA,CAEA;;IACA;MACA;IACA,CAFA,MAEA;MACA;MACA;MACA,6BACA,8CADA;IAEA;EACA,CA7CA;;EA8CAC;IACA;IACAC;MACAC;MACAC,KACAC,MADA,CACA;QACAC,sBADA;QAEAC,cAFA;QAGAC;UACAC;QADA,CAHA;QAMAnB,QACA;QADA;MANA,CADA,EAWAoB,IAXA,CAWAC;QACA;QACAC;QACA;MACA,CAfA;IAgBA,CApBA;;IAqBA;IACAC;MACAV;MACAC,KACAC,MADA,CACA;QACAC,yBADA;QAEAC,cAFA;QAGAC;UACAC;QADA,CAHA;QAMAnB,QACA;QADA;MANA,CADA,EAWAoB,IAXA,CAWAC;QACA;QACAC;QACA;MACA,CAfA;IAgBA,CAxCA;;IAyCA;IACAE;MACAV,KACAC,MADA,CACA;QACAC,yBADA;QAEAC,cAFA;QAGAC;UACAC;QADA,CAHA;QAMAnB;UACAyB;QADA;MANA,CADA,EAWAL,IAXA,CAWAC;QACA;QACAC;QACA;MACA,CAfA;IAgBA;;EA3DA;AA9CA","names":["data","pathStatus","AddressInfo","areaList","province_list","city_list","county_list","components","Header","Tabbar","mounted","methods","onAdd","content","http","$axios","url","method","headers","token","then","res","Toast","onUpdate","onDelete","id"],"sourceRoot":"src/views/path","sources":["Path-List.vue"],"sourcesContent":["<template>\r\n  <div class=\"path-index container\">\r\n    <Header>\r\n      <span v-if=\"pathStatus\">添加地址</span>\r\n      <span v-else>编辑地址</span>\r\n    </Header>\r\n    <section>\r\n      <van-address-edit\r\n        v-if=\"pathStatus\"\r\n        :area-list=\"areaList\"\r\n        show-set-default\r\n        @save=\"onAdd\"\r\n      />\r\n\r\n      <van-address-edit\r\n        v-else\r\n        :address-info=\"AddressInfo\"\r\n        :area-list=\"areaList\"\r\n        show-delete\r\n        show-set-default\r\n        show-search-result\r\n        @save=\"onUpdate\"\r\n        @delete=\"onDelete\"\r\n      />\r\n    </section>\r\n    <Tabbar></Tabbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from \"vant\";\r\nimport Header from \"@/components/path/Header.vue\";\r\nimport Tabbar from \"@/components/common/Tabbar.vue\";\r\nimport http from \"@/common/api/request.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      pathStatus: false,\r\n      AddressInfo: {},\r\n      areaList: {\r\n        province_list: {\r\n          110000: \"柳州市\",\r\n          120000: \"北海市\",\r\n          130000: \"南宁市\",\r\n        },\r\n        city_list: {\r\n          110100: \"柳城县\",\r\n          110200: \"融水县\",\r\n          120100: \"合浦县\",\r\n          130100: \"上林县\",\r\n        },\r\n        county_list: {\r\n          110101: \"东城区\",\r\n          110102: \"西城区\",\r\n          110201: \"东城区\",\r\n          110202: \"西城区\",\r\n          120101: \"东城区\",\r\n          120102: \"西城区\",\r\n          130101: \"东城区\",\r\n          130102: \"西城区\",\r\n        },\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    Header,\r\n    Tabbar,\r\n  },\r\n  mounted() {\r\n    let key = JSON.parse(this.$route.params.key);\r\n    //是通过添加进来的\r\n    if (key == \"add\") {\r\n      this.pathStatus = true;\r\n    } else {\r\n      //编辑进来的\r\n      this.AddressInfo = key;\r\n      this.AddressInfo.isDefault =\r\n        this.AddressInfo.isDefault == 1 ? true : false;\r\n    }\r\n  },\r\n  methods: {\r\n    //点击保存触发 ==> 增加\r\n    onAdd(content) {\r\n      content.isDefault = content.isDefault == true ? 1 : 0;\r\n      http\r\n        .$axios({\r\n          url: \"/api/addAddress\",\r\n          method: \"post\",\r\n          headers: {\r\n            token: true,\r\n          },\r\n          data: {\r\n            ...content,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          if (!res.success) return;\r\n          Toast(res.msg);\r\n          this.$router.push(\"/path\");\r\n        });\r\n    },\r\n    //点击保存触发 ==> 修改\r\n    onUpdate(content) {\r\n      content.isDefault = content.isDefault == true ? 1 : 0;\r\n      http\r\n        .$axios({\r\n          url: \"/api/updateAddress\",\r\n          method: \"post\",\r\n          headers: {\r\n            token: true,\r\n          },\r\n          data: {\r\n            ...content,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          if (!res.success) return;\r\n          Toast(res.msg);\r\n          this.$router.push(\"/path\");\r\n        });\r\n    },\r\n    //删除\r\n   onDelete(content) {\r\n      http\r\n        .$axios({\r\n          url: \"/api/deleteAddress\",\r\n          method: \"post\",\r\n          headers: {\r\n            token: true,\r\n          },\r\n          data: {\r\n            id: content.id,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          if (!res.success) return;\r\n          Toast(res.msg);\r\n          this.$router.push(\"/path\");\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang='scss' scoped>\r\nsection {\r\n  background-color: #f7f7f7;\r\n  .van-address-edit {\r\n    padding: 0;\r\n  }\r\n  ::v-deep .van-address-edit__buttons {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n  }\r\n  ::v-deep .van-button--danger {\r\n    width: 100%;\r\n    height: 30px;\r\n    background-color: #b0352f;\r\n  }\r\n  ::v-deep .van-button--default {\r\n    width: 100%;\r\n    height: 30px;\r\n  }\r\n}\r\n::v-deep .tabbar {\r\n  border-top: 2px solid #ccc;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}