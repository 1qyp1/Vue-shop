{"ast":null,"code":"import Tabbar from \"@/components/common/Tabbar.vue\";\nimport Header from \"@/views/login/Header.vue\";\nimport { Toast } from \"mint-ui\";\nimport http from \"@/common/api/request.js\";\nimport { mapMutations } from 'vuex';\nexport default {\n  data() {\n    return {\n      userTel: \"\",\n      //用户输入的手机号\n      userPwd: \"\",\n      //用户输入的密码\n      //验证规则\n      rules: {\n        //手机号验证\n        userTel: {\n          rule: /^1[23456789]\\d{9}$/,\n          msg: \"手机号不能为空,并且是11位数字\"\n        },\n        //密码验证\n        userPwd: {\n          rule: /^\\w{6,12}$/,\n          msg: \"密码不能为空,并且要求6,12位\"\n        }\n      }\n    };\n  },\n\n  components: {\n    Tabbar,\n    Header\n  },\n  methods: { ...mapMutations(['userLogin']),\n\n    login() {\n      // 前端验证\n      if (!this.validate(\"userTel\")) return;\n      if (!this.validate(\"userPwd\")) return; // 发送请求，后端验证\n\n      http.$axios({\n        url: \"/api/login\",\n        method: \"POST\",\n        data: {\n          // 传递用户输入的账号，密码\n          userTel: this.userTel,\n          userPwd: this.userPwd\n        } // 传递后就返回一个值，这个值是由后端返回过来的\n\n      }).then(res => {\n        // 提示信息\n        Toast(res.msg); //如果登录失败\n\n        if (!res.success) return; //如果登录成功就调转页面，存储用户信息\n        // 将res.data传过去\n\n        this.userLogin(res.data);\n        this.$router.push('/my');\n      });\n    },\n\n    //   验证信息提示\n    validate(key) {\n      let bool = true; // key值的就是前端验证的userTel,this[key]是用户输入的账号密码，然后进行验证\n\n      if (!this.rules[key].rule.test(this[key])) {\n        Toast(this.rules[key].msg);\n        bool = false;\n        return false;\n      }\n\n      return bool;\n    },\n\n    // 跳转注册页面\n    goRegister() {\n      this.$router.push(\"/register\");\n    },\n\n    //找回密码\n    goRecovery() {\n      this.$router.push(\"/recovery\");\n    },\n\n    // 短信登录\n    goTelLogin() {\n      this.$router.push(\"/login\");\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAiCA;AACA;AACA;AACA;AACA;AACA;EACAA;IACA;MACAC,WADA;MACA;MACAC,WAFA;MAEA;MACA;MACAC;QACA;QACAF;UACAG,0BADA;UAEAC;QAFA,CAFA;QAMA;QACAH;UACAE,kBADA;UAEAC;QAFA;MAPA;IAJA;EAiBA,CAnBA;;EAoBAC;IACAC,MADA;IAEAC;EAFA,CApBA;EAwBAC,WACA,8BADA;;IAEAC;MACA;MACA;MACA,sCAHA,CAIA;;MACAC,KACAC,MADA,CACA;QACAC,iBADA;QAEAC,cAFA;QAGAd;UACA;UACAC,qBAFA;UAGAC;QAHA,CAHA,CAQA;;MARA,CADA,EAWAa,IAXA,CAWAC;QACA;QACAC,eAFA,CAGA;;QACA,yBAJA,CAKA;QAEA;;QACA;QACA;MACA,CArBA;IAsBA,CA7BA;;IA8BA;IACAC;MACA,gBADA,CAEA;;MACA;QACAD;QACAE;QACA;MACA;;MACA;IACA,CAxCA;;IAyCA;IACAC;MACA;IACA,CA5CA;;IA6CA;IACAC;MACA;IACA,CAhDA;;IAiDA;IACAC;MACA;IACA;;EApDA;AAxBA","names":["data","userTel","userPwd","rules","rule","msg","components","Tabbar","Header","methods","login","http","$axios","url","method","then","res","Toast","validate","bool","goRegister","goRecovery","goTelLogin"],"sourceRoot":"src/views/login","sources":["UserLogin.vue"],"sourcesContent":["<template>\r\n  <div class=\"login container\">\r\n    <Header></Header>\r\n    <section>\r\n      <div class=\"login-tel\">\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"userTel\"\r\n          placeholder=\"请输入手机号\"\r\n          pattern=\"[0-9]*\"\r\n        />\r\n      </div>\r\n      <div class=\"login-code\">\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"userPwd\"\r\n          placeholder=\"请输入密码\"\r\n          pattern=\"[0-9]*\"\r\n        />\r\n        <!-- <button>获取验证码</button> -->\r\n      </div>\r\n      <div class=\"login-btn\" @click=\"login\">登 录</div>\r\n      <div class=\"tab\">\r\n        <span @click=\"goTelLogin\">短信登录</span>\r\n        <span @click=\"goRecovery\">找回密码</span>\r\n        <span @click=\"goRegister\">快速注册</span>\r\n      </div>\r\n    </section>\r\n    <Tabbar></Tabbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Tabbar from \"@/components/common/Tabbar.vue\";\r\nimport Header from \"@/views/login/Header.vue\";\r\nimport { Toast } from \"mint-ui\";\r\nimport http from \"@/common/api/request.js\";\r\nimport{mapMutations} from 'vuex'\r\nexport default {\r\n  data() {\r\n    return {\r\n      userTel: \"\", //用户输入的手机号\r\n      userPwd: \"\", //用户输入的密码\r\n      //验证规则\r\n      rules: {\r\n        //手机号验证\r\n        userTel: {\r\n          rule: /^1[23456789]\\d{9}$/,\r\n          msg: \"手机号不能为空,并且是11位数字\",\r\n        },\r\n        //密码验证\r\n        userPwd: {\r\n          rule: /^\\w{6,12}$/,\r\n          msg: \"密码不能为空,并且要求6,12位\",\r\n        },\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    Tabbar,\r\n    Header,\r\n  },\r\n  methods: {\r\n    ...mapMutations(['userLogin']),\r\n    login() {\r\n      // 前端验证\r\n      if (!this.validate(\"userTel\")) return;\r\n      if (!this.validate(\"userPwd\")) return;\r\n      // 发送请求，后端验证\r\n      http\r\n        .$axios({\r\n          url: \"/api/login\",\r\n          method: \"POST\",\r\n          data: {\r\n            // 传递用户输入的账号，密码\r\n            userTel: this.userTel,\r\n            userPwd: this.userPwd,\r\n          },\r\n          // 传递后就返回一个值，这个值是由后端返回过来的\r\n        })\r\n        .then((res) => {\r\n          // 提示信息\r\n          Toast(res.msg);\r\n          //如果登录失败\r\n          if (!res.success) return;\r\n          //如果登录成功就调转页面，存储用户信息\r\n\r\n          // 将res.data传过去\r\n          this.userLogin(res.data)\r\n          this.$router.push('/my')\r\n        });\r\n    },\r\n    //   验证信息提示\r\n    validate(key) {\r\n      let bool = true;\r\n      // key值的就是前端验证的userTel,this[key]是用户输入的账号密码，然后进行验证\r\n      if (!this.rules[key].rule.test(this[key])) {\r\n        Toast(this.rules[key].msg);\r\n        bool = false;\r\n        return false;\r\n      }\r\n      return bool;\r\n    },\r\n    // 跳转注册页面\r\n    goRegister() {\r\n      this.$router.push(\"/register\");\r\n    },\r\n    //找回密码\r\n    goRecovery() {\r\n      this.$router.push(\"/recovery\");\r\n    },\r\n    // 短信登录\r\n    goTelLogin() {\r\n      this.$router.push(\"/login\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.login {\r\n}\r\nsection {\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #f5f5f5;\r\n  align-items: center;\r\n  div {\r\n    padding: 10px 0;\r\n    width: 335px;\r\n    height: 44px;\r\n  }\r\n  input {\r\n    box-sizing: border-box;\r\n    background-color: #fff;\r\n    border-radius: 10px;\r\n    height: 44px;\r\n    border: 1px solid #ccc;\r\n    padding: 0 10px;\r\n  }\r\n  .login-tel {\r\n    margin-top: 20px;\r\n    input {\r\n      width: 335px;\r\n    }\r\n  }\r\n  .login-code {\r\n    // input{\r\n    //     flex: 1;\r\n    // }\r\n    button {\r\n      border: 0;\r\n      height: 44px;\r\n      background-color: #b0352f;\r\n      border-radius: 10px;\r\n      // margin-left: 55px;\r\n      color: #fff;\r\n      padding: 0 9px;\r\n    }\r\n    input {\r\n      width: 335px;\r\n    }\r\n  }\r\n  .login-btn {\r\n    margin-top: 15px;\r\n    display: flex;\r\n    height: 20px;\r\n    background-color: #b0352f;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 10px;\r\n    color: #fff;\r\n  }\r\n  .tab {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    span {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}