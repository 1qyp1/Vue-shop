{"ast":null,"code":"export default {\n  data() {\n    return {\n      searchVal: this.$route.query.key || \"\",\n      searchArr: []\n    };\n  },\n\n  created() {},\n\n  methods: {\n    goback() {\n      this.$router.back();\n    },\n\n    goSearchList() {\n      // 如果输入为空，直接返回\n      if (!this.searchVal) return; // 判断之前有没有搜索的本地存储\n\n      if (!localStorage.getItem(\"searchList\")) {\n        // 如果没有搜索过\n        localStorage.setItem(\"searchList\", []);\n      } else {\n        // 如果之前有搜索过\n        this.searchArr = JSON.parse(localStorage.getItem(\"searchList\"));\n      } // 增加数据\n\n\n      this.searchArr.unshift(this.searchVal); // 去重\n\n      let newArr = new Set(this.searchArr); // 给本地存储赋值\n\n      localStorage.setItem(\"searchList\", JSON.stringify(Array.from(newArr))); // 如果路径没有变化就不跳转页面\n\n      if (this.searchVal === this.$route.query.key) return; //跳转页面\n\n      this.$router.push({\n        name: \"list\",\n        query: {\n          key: this.searchVal\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAyBA;EACAA;IACA;MACAC,sCADA;MAEAC;IAFA;EAIA,CANA;;EAOAC,YAPA;;EAQAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;MACA,4BAFA,CAGA;;MACA;QACA;QACAC;MACA,CAHA,MAGA;QACA;QACA;MACA,CAVA,CAWA;;;MACA,uCAZA,CAcA;;MACA,qCAfA,CAgBA;;MACAA,uEAjBA,CAmBA;;MACA,qDApBA,CAqBA;;MACA;QACAC,YADA;QAEAC;UACAC;QADA;MAFA;IAMA;;EAhCA;AARA","names":["data","searchVal","searchArr","created","methods","goback","goSearchList","localStorage","name","query","key"],"sourceRoot":"src/components/search","sources":["Header.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <header>\r\n      <!-- 左 -->\r\n      <div class=\"search-return\" @click=\"goback\">\r\n        <i class=\"iconfont icon-fanhui\"></i>\r\n      </div>\r\n      <!-- 中 -->\r\n      <div class=\"search-main\">\r\n        <i class=\"iconfont icon-sousuo\"></i>\r\n        <form action=\"\" onsubmit=\"return false\" @keyup.enter=\"goSearchList\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"搜索你喜欢的产品\"\r\n            v-model=\"searchVal\"\r\n          />\r\n        </form>\r\n      </div>\r\n      <!-- 右 -->\r\n      <div class=\"search-btn\" @click=\"goSearchList\">搜索</div>\r\n    </header>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchVal: this.$route.query.key || \"\",\r\n      searchArr: [],\r\n    };\r\n  },\r\n  created() {},\r\n  methods: {\r\n    goback() {\r\n      this.$router.back();\r\n    },\r\n    goSearchList() {\r\n      // 如果输入为空，直接返回\r\n      if (!this.searchVal) return;\r\n      // 判断之前有没有搜索的本地存储\r\n      if (!localStorage.getItem(\"searchList\")) {\r\n        // 如果没有搜索过\r\n        localStorage.setItem(\"searchList\", []);\r\n      } else {\r\n        // 如果之前有搜索过\r\n        this.searchArr = JSON.parse(localStorage.getItem(\"searchList\"));\r\n      }\r\n      // 增加数据\r\n      this.searchArr.unshift(this.searchVal);\r\n\r\n      // 去重\r\n      let newArr = new Set(this.searchArr);\r\n      // 给本地存储赋值\r\n      localStorage.setItem(\"searchList\", JSON.stringify(Array.from(newArr)));\r\n\r\n      // 如果路径没有变化就不跳转页面\r\n      if (this.searchVal === this.$route.query.key) return;\r\n      //跳转页面\r\n      this.$router.push({\r\n        name: \"list\",\r\n        query: {\r\n          key: this.searchVal,\r\n        },\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style >\r\nheader {\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  color: #fff;\r\n  width: 100%;\r\n  height: 44px;\r\n  background-color: #b0352f;\r\n}\r\n.search-main {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 260px;\r\n  height: 30px;\r\n  background-color: #fff;\r\n  border-radius: 12px;\r\n}\r\ninput{\r\n  font-size: 15px;\r\n  color:black;\r\n}\r\n.search-main i {\r\n  color: #000;\r\n  padding: 0 8px;\r\n}\r\n.search-return i {\r\n  font-size: 25px;\r\n}\r\n.search-btn {\r\n  font-size: 15px;\r\n}\r\n.search-main form {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n.search-main form input {\r\n  width: 100%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}