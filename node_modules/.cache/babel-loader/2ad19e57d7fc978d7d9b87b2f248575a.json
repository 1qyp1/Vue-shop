{"ast":null,"code":"import Tabbar from \"@/components/common/Tabbar.vue\";\nimport Header from \"@/views/login/Header.vue\";\nimport { Toast } from \"mint-ui\";\nimport http from \"@/common/api/request.js\";\nexport default {\n  data() {\n    return {\n      disabled: false,\n      userTel: \"\",\n      //验证规则\n      rules: {\n        //密码验证\n        userPwd: {\n          rule: /^\\w{6,12}$/,\n          msg: \"密码不能为空,并且要求6,12位\"\n        }\n      }\n    };\n  },\n\n  components: {\n    Tabbar,\n    Header\n  },\n  methods: {\n    //   验证信息并提示\n    validate(key) {\n      let bool = true; // key值的就是前端验证的userTel,this[key]是用户输入的账号密码，然后进行验证\n\n      if (!this.rules[key].rule.test(this[key])) {\n        Toast(this.rules[key].msg);\n        bool = false;\n        return false;\n      }\n\n      return bool;\n    },\n\n    // 点击确认修改\n    submitBtn() {\n      //判断密码是否规范\n      if (!this.validate(\"userPwd\")) return; //查询后端是否有该手机号\n\n      http.$axios({\n        url: \"api/recovery\",\n        method: \"POST\",\n        // 拿到用户输入的手机号\n        data: {\n          phone: this.$route.query.phone,\n          pwd: this.userPwd\n        }\n      }).then(res => {\n        Toast('修改成功');\n\n        if (res.success) {\n          this.$router.push({\n            path: '/login'\n          });\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAgBA;AACA;AACA;AACA;AACA;EACAA;IACA;MACAC,eADA;MAEAC,WAFA;MAGA;MACAC;QACA;QACAC;UACAC,kBADA;UAEAC;QAFA;MAFA;IAJA;EAYA,CAdA;;EAeAC;IACAC,MADA;IAEAC;EAFA,CAfA;EAmBAC;IACA;IACAC;MACA,gBADA,CAEA;;MACA;QACAC;QACAC;QACA;MACA;;MACA;IACA,CAXA;;IAYA;IACAC;MACA;MACA,sCAFA,CAGA;;MACAC,KACAC,MADA,CACA;QACAC,mBADA;QAEAC,cAFA;QAGA;QACAlB;UACAmB,8BADA;UAEAC;QAFA;MAJA,CADA,EAUAC,IAVA,CAUAC;QACAV;;QACA;UACA;YACAW;UADA;QAGA;MACA,CAjBA;IAkBA;;EAnCA;AAnBA","names":["data","disabled","userTel","rules","userPwd","rule","msg","components","Tabbar","Header","methods","validate","Toast","bool","submitBtn","http","$axios","url","method","phone","pwd","then","res","path"],"sourceRoot":"src/views/recovery","sources":["RecoveryBtn.vue"],"sourcesContent":["<template>\r\n  <div class=\"login container\">\r\n    <Header>\r\n      <span>找回密码</span>\r\n    </Header>\r\n    <section>\r\n      <div class=\"login-tel\">\r\n        <input type=\"text\" v-model=\"userPwd\" placeholder=\"请输入新密码\" />\r\n      </div>\r\n      <div class=\"login-btn\" @click=\"submitBtn\">确认修改</div>\r\n    </section>\r\n    <Tabbar></Tabbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Tabbar from \"@/components/common/Tabbar.vue\";\r\nimport Header from \"@/views/login/Header.vue\";\r\nimport { Toast } from \"mint-ui\";\r\nimport http from \"@/common/api/request.js\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      disabled: false,\r\n      userTel: \"\",\r\n      //验证规则\r\n      rules: {\r\n        //密码验证\r\n        userPwd: {\r\n          rule: /^\\w{6,12}$/,\r\n          msg: \"密码不能为空,并且要求6,12位\",\r\n        },\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    Tabbar,\r\n    Header,\r\n  },\r\n  methods: {\r\n    //   验证信息并提示\r\n    validate(key) {\r\n      let bool = true;\r\n      // key值的就是前端验证的userTel,this[key]是用户输入的账号密码，然后进行验证\r\n      if (!this.rules[key].rule.test(this[key])) {\r\n        Toast(this.rules[key].msg);\r\n        bool = false;\r\n        return false;\r\n      }\r\n      return bool;\r\n    },\r\n    // 点击确认修改\r\n    submitBtn() {\r\n      //判断密码是否规范\r\n      if (!this.validate(\"userPwd\")) return;\r\n      //查询后端是否有该手机号\r\n      http\r\n        .$axios({\r\n          url: \"api/recovery\",\r\n          method: \"POST\",\r\n          // 拿到用户输入的手机号\r\n          data: {\r\n            phone: this.$route.query.phone,\r\n            pwd:this.userPwd\r\n          },\r\n        })\r\n        .then((res) => {\r\n            Toast('修改成功')\r\n            if(res.success){\r\n                this.$router.push({\r\n                    path:'/login'\r\n                })\r\n            }\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang='scss'>\r\n.login {\r\n}\r\nsection {\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #f5f5f5;\r\n  align-items: center;\r\n  div {\r\n    padding: 10px 0;\r\n    width: 335px;\r\n    height: 44px;\r\n  }\r\n  input {\r\n    box-sizing: border-box;\r\n    background-color: #fff;\r\n    border-radius: 10px;\r\n    height: 44px;\r\n    border: 1px solid #ccc;\r\n    padding: 0 10px;\r\n  }\r\n  .login-tel {\r\n    margin-top: 20px;\r\n    input {\r\n      width: 335px;\r\n    }\r\n  }\r\n  .login-code {\r\n    // input{\r\n    //     flex: 1;\r\n    // }\r\n    button {\r\n      border: 0;\r\n      height: 44px;\r\n      background-color: #b0352f;\r\n      border-radius: 10px;\r\n      // margin-left: 55px;\r\n      color: #fff;\r\n      padding: 0 9px;\r\n      width: 112px;\r\n    }\r\n    input {\r\n      width: 223px;\r\n    }\r\n  }\r\n  .login-btn {\r\n    margin-top: 15px;\r\n    display: flex;\r\n    height: 30px;\r\n    background-color: #b0352f;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 10px;\r\n    color: #fff;\r\n  }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}