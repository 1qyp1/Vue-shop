{"ast":null,"code":"import \"swiper/dist/css/swiper.css\";\nimport { swiper, swiperSlide } from \"vue-awesome-swiper\";\nimport BetterScroll from \"better-scroll\";\nimport http from \"@/common/api/request.js\";\nimport { Toast } from \"mint-ui\"; // import { param } from 'server/routes';\n\nexport default {\n  data() {\n    return {\n      id: \"\",\n      goods: {},\n      styleOption: {},\n      swiperOption: {\n        //swiper3\n        autoplay: 3000,\n        speed: 1000,\n        pagination: {\n          el: \".swiper-pagination\"\n        }\n      },\n      swiperList: [{\n        imgUrl: \"./images/goodsthree.webp\"\n      }, {\n        imgUrl: \"./images/goodsone.webp\"\n      }, {\n        imgUrl: \"./images/goodsfour.webp\"\n      }],\n      BetterScroll: \"\",\n      isShow: true\n    };\n  },\n\n  components: {\n    swiper,\n    swiperSlide\n  },\n\n  mounted() {\n    this.BetterScroll = new BetterScroll(this.$refs.wrapper, {\n      click: true,\n      bounce: false,\n      probeType: 3\n    });\n    this.BetterScroll.on(\"scroll\", pos => {\n      let posY = Math.abs(pos.y);\n      let opacity = posY / 180;\n      opacity = opacity > 1 ? 1 : opacity;\n      this.styleOption = {\n        opacity: opacity\n      };\n\n      if (posY >= 90) {\n        this.isShow = false;\n      } else {\n        this.isShow = true;\n      }\n    });\n  },\n\n  methods: {\n    goBack() {\n      this.$router.back();\n    },\n\n    //请求接口\n    async getData() {\n      let id = this.$route.query.id;\n      let res = await http.$axios({\n        url: \"/api/goods/id\",\n        // 前端给后端传递di\n        params: {\n          id\n        }\n      });\n      this.goods = res; // this.items = Object.freeze(res.topBar)1600\n      // this.newData = Object.freeze(res.data)\n    },\n\n    // 加入购物车\n    addCart() {\n      let id = this.$route.query.id;\n      http.$axios({\n        url: \"/api/addCart\",\n        method: \"post\",\n        data: {\n          goodsId: id\n        },\n        headers: {\n          // true代表验证，false代表不验证\n          token: true\n        }\n      }).then(res => {\n        if (res.success) {\n          Toast(res.msg);\n        }\n      });\n    }\n\n  },\n\n  created() {\n    this.id = this.$route.query.id;\n    this.getData();\n  },\n\n  activated() {\n    // 动态值与存储值做对比\n    if (this.$route.query.id != this.id) {\n      this.getData();\n      this.id = this.$route.query.id;\n    }\n  }\n\n};","map":{"version":3,"mappings":"AAiEA;AACA;AACA;AACA;AACA,gC,CACA;;AACA;EACAA;IACA;MACAC,MADA;MAEAC,SAFA;MAGAC,eAHA;MAIAC;QACA;QACAC,cAFA;QAGAC,WAHA;QAIAC;UACAC;QADA;MAJA,CAJA;MAYAC,aACA;QACAC;MADA,CADA,EAIA;QACAA;MADA,CAJA,EAOA;QACAA;MADA,CAPA,CAZA;MAuBAC,gBAvBA;MAwBAC;IAxBA;EA0BA,CA5BA;;EA6BAC;IACAC,MADA;IAEAC;EAFA,CA7BA;;EAiCAC;IACA;MACAC,WADA;MAEAC,aAFA;MAGAC;IAHA;IAKA;MACA;MACA;MACAC;MACA;QACAA;MADA;;MAGA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA,CAZA;EAaA,CApDA;;EAqDAC;IACAC;MACA;IACA,CAHA;;IAIA;IACA;MACA;MACA;QACAC,oBADA;QAEA;QACAC;UACAvB;QADA;MAHA;MAOA,iBATA,CAUA;MACA;IACA,CAjBA;;IAkBA;IACAwB;MACA;MACAC,KACAC,MADA,CACA;QACAJ,mBADA;QAEAK,cAFA;QAGA5B;UACA6B;QADA,CAHA;QAMAC;UACA;UACAC;QAFA;MANA,CADA,EAYAC,IAZA,CAYAC;QACA;UACAC;QACA;MACA,CAhBA;IAiBA;;EAtCA,CArDA;;EA6FAC;IACA;IACA;EACA,CAhGA;;EAiGAC;IACA;IACA;MACA;MACA;IACA;EACA;;AAvGA","names":["data","id","goods","styleOption","swiperOption","autoplay","speed","pagination","el","swiperList","imgUrl","BetterScroll","isShow","components","swiper","swiperSlide","mounted","click","bounce","probeType","opacity","methods","goBack","url","params","addCart","http","$axios","method","goodsId","headers","token","then","res","Toast","created","activated"],"sourceRoot":"src/views","sources":["Detail.vue"],"sourcesContent":["<template>\r\n  <div class=\"detail\">\r\n    <header>\r\n      <div class=\"header-returns\" v-show=\"isShow\">\r\n        <div @click=\"goBack\">\r\n          <i class=\"iconfont icon-fanhui\"></i>\r\n        </div>\r\n        <div>\r\n          <i class=\"iconfont icon-kefu\"></i>\r\n        </div>\r\n      </div>\r\n      <div class=\"header-bar\" v-show=\"!isShow\" :style=\"styleOption\">\r\n        <div>\r\n          <i class=\"iconfont icon-fanhui\"></i>\r\n        </div>\r\n        <div>\r\n          <span>商品详情</span>\r\n          <span>商品评价</span>\r\n        </div>\r\n        <div>\r\n          <i class=\"iconfont icon-kefu\"></i>\r\n        </div>\r\n      </div>\r\n    </header>\r\n    <section ref=\"wrapper\">\r\n      <div>\r\n        <div class=\"swiper-main\">\r\n          <swiper :options=\"swiperOption\">\r\n            <swiper-slide v-for=\"(item, index) in swiperList\" :key=\"index\">\r\n              <img :src=\"item.imgUrl\" alt=\"\" />\r\n            </swiper-slide>\r\n          </swiper>\r\n          <div class=\"swiper-pagination\"></div>\r\n        </div>\r\n        <div class=\"goods-name\">\r\n          <h1>{{ goods.name }}</h1>\r\n          <div>性价首选,性能超前,超爽的游戏体验,无比丝滑的流畅性</div>\r\n        </div>\r\n        <div class=\"goods_price\">\r\n          <div class=\"pprice\">\r\n            <span>￥</span>\r\n            <b>{{ goods.price }}</b>\r\n          </div>\r\n          <div class=\"oprice\">\r\n            <span>价格:</span>\r\n            <del>￥139</del>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <img style=\"width: 100%; height: 500px\" :src=\"goods.imgUrl\" alt=\"\" />\r\n          <img style=\"width: 100%; height: 500px\" :src=\"goods.imgUrl\" alt=\"\" />\r\n          <img style=\"width: 100%; height: 500px\" :src=\"goods.imgUrl\" alt=\"\" />\r\n          <img style=\"width: 100%; height: 500px\" :src=\"goods.imgUrl\" alt=\"\" />\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <footer>\r\n      <div class=\"add-cart\" @click=\"addCart\">加入购物车</div>\r\n      <div>立即购买</div>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport \"swiper/dist/css/swiper.css\";\r\nimport { swiper, swiperSlide } from \"vue-awesome-swiper\";\r\nimport BetterScroll from \"better-scroll\";\r\nimport http from \"@/common/api/request.js\";\r\nimport { Toast } from \"mint-ui\";\r\n// import { param } from 'server/routes';\r\nexport default {\r\n  data() {\r\n    return {\r\n      id: \"\",\r\n      goods: {},\r\n      styleOption: {},\r\n      swiperOption: {\r\n        //swiper3\r\n        autoplay: 3000,\r\n        speed: 1000,\r\n        pagination: {\r\n          el: \".swiper-pagination\",\r\n        },\r\n      },\r\n      swiperList: [\r\n        {\r\n          imgUrl: \"./images/goodsthree.webp\",\r\n        },\r\n        {\r\n          imgUrl: \"./images/goodsone.webp\",\r\n        },\r\n        {\r\n          imgUrl: \"./images/goodsfour.webp\",\r\n        },\r\n      ],\r\n      BetterScroll: \"\",\r\n      isShow: true,\r\n    };\r\n  },\r\n  components: {\r\n    swiper,\r\n    swiperSlide,\r\n  },\r\n  mounted() {\r\n    this.BetterScroll = new BetterScroll(this.$refs.wrapper, {\r\n      click: true,\r\n      bounce: false,\r\n      probeType: 3,\r\n    });\r\n    this.BetterScroll.on(\"scroll\", (pos) => {\r\n      let posY = Math.abs(pos.y);\r\n      let opacity = posY / 180;\r\n      opacity = opacity > 1 ? 1 : opacity;\r\n      this.styleOption = {\r\n        opacity: opacity,\r\n      };\r\n      if (posY >= 90) {\r\n        this.isShow = false;\r\n      } else {\r\n        this.isShow = true;\r\n      }\r\n    });\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.back();\r\n    },\r\n    //请求接口\r\n    async getData() {\r\n      let id = this.$route.query.id;\r\n      let res = await http.$axios({\r\n        url: \"/api/goods/id\",\r\n        // 前端给后端传递di\r\n        params: {\r\n          id,\r\n        },\r\n      });\r\n      this.goods = res;\r\n      // this.items = Object.freeze(res.topBar)1600\r\n      // this.newData = Object.freeze(res.data)\r\n    },\r\n    // 加入购物车\r\n    addCart() {\r\n      let id = this.$route.query.id;\r\n      http\r\n        .$axios({\r\n          url: \"/api/addCart\",\r\n          method: \"post\",\r\n          data: {\r\n            goodsId: id,\r\n          },\r\n          headers: {\r\n            // true代表验证，false代表不验证\r\n            token: true,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          if(res.success){\r\n            Toast(res.msg);\r\n          }\r\n        });\r\n    },\r\n  },\r\n  created() {\r\n    this.id = this.$route.query.id;\r\n    this.getData();\r\n  },\r\n  activated() {\r\n    // 动态值与存储值做对比\r\n    if (this.$route.query.id != this.id) {\r\n      this.getData();\r\n      this.id = this.$route.query.id;\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.detail {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\nheader {\r\n  z-index: 99999;\r\n  position: fixed;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 44px;\r\n  .header-returns {\r\n    width: 100%;\r\n    // height: 44px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    div {\r\n      margin: 0 10px;\r\n      width: 32px;\r\n      line-height: 32px;\r\n      text-align: center;\r\n      background-color: rgba(0, 0, 0, 0.3);\r\n      border-radius: 50%;\r\n    }\r\n    i {\r\n      font-size: 20px;\r\n      color: #fff;\r\n    }\r\n  }\r\n  .header-bar {\r\n    width: 100%;\r\n    height: 44px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    background-color: #fff;\r\n    font-style: 16px;\r\n    span {\r\n      padding: 0 12px;\r\n    }\r\n    i {\r\n      font-size: 22px;\r\n      padding: 0 10px;\r\n    }\r\n  }\r\n}\r\nsection {\r\n  flex: 1;\r\n  overflow: hidden;\r\n}\r\nfooter {\r\n  display: flex;\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  height: 49px;\r\n  width: 100%;\r\n  border-top: 1px solid #ccc;\r\n  background-color: #fff;\r\n  justify-content: center;\r\n  align-items: center;\r\n  div {\r\n    line-height: 49px;\r\n    width: 50%;\r\n    text-align: center;\r\n    background-color: red;\r\n    color: #fff;\r\n    &.add-cart {\r\n      background-color: #ff9500;\r\n    }\r\n  }\r\n}\r\n.swiper-main {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 375px;\r\n  overflow: hidden;\r\n}\r\n.swiper-container {\r\n  width: 100%;\r\n  height: 375px;\r\n}\r\n.swiper-container img {\r\n  width: 100%;\r\n  height: 375px;\r\n}\r\n.swiper-pagination {\r\n  width: 100%;\r\n  bottom: 0;\r\n  text-align: right;\r\n  right: 15px;\r\n}\r\n.goods-name {\r\n  padding: 20px 0;\r\n  border-bottom: 1px solid #ccc;\r\n  h1 {\r\n    font-size: 20px;\r\n    font-weight: 500;\r\n  }\r\n  div {\r\n    font-size: 14px;\r\n    color: #999;\r\n  }\r\n}\r\n.goods_price {\r\n  padding: 20px;\r\n  .oprice {\r\n    color: #999;\r\n    font-size: 12px;\r\n  }\r\n  .pprice {\r\n    color: red;\r\n    font-size: 15px;\r\n  }\r\n}\r\n</style>\r\n\r\n"]},"metadata":{},"sourceType":"module"}